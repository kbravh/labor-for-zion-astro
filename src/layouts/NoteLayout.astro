---
import type {Backlink} from '../utils/mdUtils';
import Backlinks from '../components/Backlinks.astro';
import Layout from './Layout.astro';
import type {Frontmatter} from '../validation/md';

interface Props {
  content: string;
  frontmatter: Frontmatter;
  backlinks: Backlink[];
}

const {frontmatter, backlinks, content} = Astro.props;
---

<Layout
  title={frontmatter.title}
  description={frontmatter.description}
>
  <main class="flex-grow">
    <article>
      <div class="border-slate-800 border-solid border-b-2 text-slate-800 p-4">
        <h1 class="text-[clamp(2rem,_10vw,_3rem)] font-body font-bold">{frontmatter.title}</h1>
        {
          frontmatter.description && (
            <p class="text-[clamp(1rem,_5vw,_1.5rem)] font-body">{frontmatter.description}</p>
          )
        }
      </div>
      <div class="flex justify-end p-4">
        <time datetime={frontmatter.date.toISOString()}>
          {frontmatter.date.toLocaleDateString('en-US', {dateStyle: 'medium'})}
        </time>
      </div>

      <div
        class="prose prose-lg prose-slate dark:prose-invert min-w-full px-4"
        set:html={content}
      />

      {!!backlinks.length && <Backlinks backlinks={backlinks} />}
    </article>
  </main>
</Layout>
