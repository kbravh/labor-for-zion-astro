---
import Layout from '../../layouts/Layout.astro';
import {getArticles} from '../../utils/mdUtils';
import Grid from '../../components/Grid.astro';
import MainWrapper from '../../components/MainWrapper.astro';
import ArticleCard from '../../components/ArticleCard.astro';
import PageTitle from '../../components/PageTitle.astro';
import Link from '../../components/Link.astro';

const posts = await getArticles();

---

<Layout title="Notes">
  <div class="flex flex-col items-center flex-grow mb-10">
    <PageTitle title="Notes" />
    <MainWrapper>
      <Grid>
        <div class="max-w-4xl w-full sm:col-span-2">
          <a
            href="/rss.xml"
            target="_blank"
            rel="noopener noreferer"
            class="flex gap-2 items-center self-end text-gray-700"
            ><svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12.75 19.5v-.75a7.5 7.5 0 0 0-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"
              ></path>
            </svg>
            Grab the RSS feed
          </a>
        </div>
        {
          posts.map(post => (
            <Link href={`/notes/${post.slug}`}>
              <ArticleCard>
                <div>
                  <h2 class="text-slate-700 font-semibold text-lg">
                    {post.frontmatter.title}
                  </h2>
                  <p class="text-slate-700 text-md">
                    {post.frontmatter.description}
                  </p>
                </div>
                <span class="text-slate-600 self-end">
                  {post.frontmatter.date.toLocaleDateString('en-US', {
                    dateStyle: 'medium',
                  })}
                </span>
              </ArticleCard>
            </Link>
          ))
        }
      </Grid>
    </MainWrapper>
  </div>
</Layout>
